name: Build

on: [push, workflow_dispatch, workflow_call]
jobs:
    build:
        runs-on: ubuntu-latest
        steps:
            - name: Checkout project sources
              uses: actions/checkout@v4

            - name: Setup Gradle
              uses: gradle/gradle-build-action@v2

            - name: Verify everything is working fine
              run: ./gradlew test

            - name: Create Jars
              run: ./gradlew jar

            - name: Upload artifact
              uses: actions/upload-artifact@v3
              with:
                  name: build-result
                  path: |
                    .
                    gui/build/libs/*.jar
                    !gui/build/
                    !gui/src/
                    !.git
                  if-no-files-found: error
